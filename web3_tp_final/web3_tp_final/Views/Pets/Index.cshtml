@model IEnumerable<web3_tp_final.Models.Pet>

@{
    ViewData["Title"] = "Index";
}

<div>
    <div class="d-flex justify-content-center">
        <h1>Mes animaux</h1>
    </div>
</div>

<div class="container">
    @{
        Pet pet;
        List<Pet> pets = Model.ToList();
        int numberOfPets = pets.Count();
        int numberOfColumns = 3; //Peut être personnalisé + tri de liste effectué
        int numberOfRows = Convert.ToInt32(Math.Ceiling(Convert.ToDouble(numberOfPets) / Convert.ToDouble(numberOfColumns)));
        if (numberOfPets > 0)
        {

            while (numberOfRows > 0)
            {
                @:<div class="row pt-3">
                    for (int i = 0; i < numberOfColumns; i++)
                    {
                        @:<div class="col-sm">
                            pet = pets[numberOfPets - 1];
                            @:<div class="card" style="width: 18rem;">
                                string imgSrc = "/images/doglogo.png";
                                if (pet.Photo != null)
                                {
                                    var base64 = Convert.ToBase64String(pet.Photo);
                                    imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                                }
                                <h5 class="card-header">@pet.Name</h5>
                                <img class="card-img-top" src=@imgSrc alt="Pet photo">
                                <div class="card-body">
                                    <p class="card-text">Date naissance: @pet.BirthYear</p>
                                    <p class="card-text">Espèce: @pet.SpecieString</p>
                                    <p class="card-text">Gardé par: </p>
                                    <a asp-action="Edit" asp-route-id="@pet.PetID" class="btn btn-primary">Modifier</a>
                                    <a asp-action="Details" asp-route-id="@pet.PetID" class="btn btn-primary">Détails</a>
                                    <a asp-action="Delete" asp-route-id="@pet.PetID" class="btn btn-danger">Désinscrire</a>
                                </div>
                            @:</div>
                            if (numberOfPets > 1)
                            {
                                numberOfPets--;
                            }
                            else
                            {
                                i = 3;
                            }
                        @:</div>
                    }
                    numberOfRows--;
                @:</div>
            }
        }
        else
        {
            <div class="d-flex justify-content-center jumbotron">
                <p>Aucun animal inscrit!</p>
            </div>
        }
    }
</div>

<div class="d-flex justify-content-center jumbotron">
    <a asp-action="Create">Inscrire!</a>
</div>
